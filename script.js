const transactionsUl=document.querySelector("#transactions"),incomeDisplay=document.querySelector("#money-plus"),expenseDisplay=document.querySelector("#money-minus"),balanceDisplay=document.querySelector("#balance"),form=document.querySelector("#form"),inputTransactionName=document.querySelector("#text"),inputTransactionAmount=document.querySelector("#amount"),localStorageTransactions=JSON.parse(localStorage.getItem("transactions"));let transactions=null===localStorage.getItem("tramsactions")?[]:localStorageTransactions;const removeTransaction=a=>{transactions=transactions.filter(b=>b.id!==a),updateLocalStorage(),init()},addTransactionIntoDOM=({amount:a,name:b,id:c})=>{const d=0>a?"-":"+",e=0>a?"minus":"plus",f=Math.abs(a),g=document.createElement("li");g.classList.add(e),g.innerHTML=`
    ${b} 
    <span>${d} R$ ${f}</span>
    <button class="delete-btn" onClick="removeTransaction(${c})">x</button>
   `,transactionsUl.append(g)},getExpenses=a=>Math.abs(a.filter(a=>0>a).reduce((a,b)=>a+b,0)).toFixed(2),getIncome=a=>a.filter(a=>0<a).reduce((a,b)=>a+b,0).toFixed(2),getTotal=a=>a.reduce((a,b)=>a+b,0).toFixed(2),updateBalanceValues=()=>{const a=transactions.map(({amount:a})=>a),b=getTotal(a),c=getIncome(a),d=getExpenses(a);balanceDisplay.textContent=`R$ ${b}`,incomeDisplay.textContent=`R$ ${c}`,expenseDisplay.textContent=`R$ ${d}`},init=()=>{transactionsUl.innerHTML="",transactions.forEach(addTransactionIntoDOM),updateBalanceValues()};init();const updateLocalStorage=()=>{localStorage.setItem("transactions",JSON.stringify(transactions))},generateID=()=>Math.round(1e3*Math.random()),addToTransactionsArray=(a,b)=>{transactions.push({id:generateID(),name:a,amount:+b})},cleanInputs=()=>{inputTransactionName.value="",inputTransactionAmount.value=""},handleFormSubmit=a=>{a.preventDefault();const b=inputTransactionName.value.trim(),c=inputTransactionAmount.value.trim();return""===b||""===c?void alert("Por favor, preencha tanto o nome quanto o valor da transa\xE7\xE3o"):void(addToTransactionsArray(b,c),init(),updateLocalStorage(),cleanInputs())};form.addEventListener("submit",handleFormSubmit);